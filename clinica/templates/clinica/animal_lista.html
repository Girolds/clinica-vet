{% extends 'clinica/base.html' %}

{% block conteudo %}
<div class="row justify-content-center">
    <div class="col-12">
        <div class="card border-0 shadow-sm">
            <div class="card-header bg-success text-white d-flex justify-content-between align-items-center py-3">
                <h4 class="mb-0 fw-bold"><i class="bi bi-postcard-heart"></i> {{ titulo }}</h4>
                
                {% if user.is_staff %}
                    <a href="{% url 'animal_criar' %}" class="btn btn-light btn-sm fw-bold text-success shadow-sm">
                        <i class="bi bi-plus-lg"></i> Novo Animal
                    </a>
                {% endif %}
            </div>

            <div class="card-body p-0">
                <div class="table-responsive">
                    <table class="table table-hover align-middle mb-0">
                        <thead class="bg-light text-secondary">
                            <tr>
                                <th class="ps-4">Nome do Pet</th>
                                <th>Espécie</th>
                                <th>Raça</th>
                                <th>Tutor Responsável</th>
                                <th class="text-end pe-4">Ações</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for animal in animais %}
                            <tr>
                                <td class="ps-4 fw-bold text-success">{{ animal.nome }}</td>
                                <td><span class="badge bg-success bg-opacity-10 text-success border border-success">{{ animal.especie }}</span></td>
                                <td class="text-muted">{{ animal.raca }}</td>
                                <td><i class="bi bi-person"></i> {{ animal.tutor.nome }}</td>
                                <td class="text-end pe-4">
                                    <div class="btn-group" role="group">
                                        <a href="{% url 'animal_detalhe' animal.pk %}" class="btn btn-sm btn-outline-secondary" title="Ver Detalhes"><i class="bi bi-eye"></i></a>
                                        
                                        {% if user.is_staff %}
                                            <a href="{% url 'animal_editar' animal.pk %}" class="btn btn-sm btn-outline-primary" title="Editar"><i class="bi bi-pencil"></i></a>
                                            <a href="{% url 'animal_deletar' animal.pk %}" class="btn btn-sm btn-outline-danger" title="Excluir"><i class="bi bi-trash"></i></a>
                                        {% endif %}
                                    </div>
                                </td>
                            </tr>
                            {% empty %}
                            <tr>
                                <td colspan="5" class="text-center py-5 text-muted">
                                    <i class="bi bi-emoji-frown display-4"></i>
                                    <p class="mt-3">Nenhum animal cadastrado ainda.</p>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}